---
title: "Plotting Shapefile"
author: "Danny Wong"
date: "Friday, January 30, 2015"
output: html_document
---

This is a script for plotting a shapefile in R using ggplot2.

Sources: 
 * Method
    + https://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles
    + http://prabhasp.com/wp/how-to-make-choropleths-in-r/
 * Data
    + http://www.sharegeo.ac.uk/handle/10672/51?show=full

```{r}
#Load the required packages
#require("rgdal")
require(rgeos)
require(maptools)
require(gpclib)
require(ggplot2)
require(plyr)

#Load postcode lists
Postcodedata <- read.csv("data/postcode.csv")

#Generate test data
set.seed(1)
Postcodedata$data <- rnorm(119, mean = 50, sd = 25)

#Load the shapefile data
UKpostcodes <- readShapeSpatial("shapefiles/GBPostcodeAreas/gb_pca_2010.shp")
#Verify it loaded correctly
plot(UKpostcodes)

#Plot the shapes using ggplot2
UKpostcodes <- fortify(UKpostcodes, region = "Label")
ggplot() + 
  geom_map(data = Postcodedata, aes(map_id = Label, fill = data), map = UKpostcodes) + 
  expand_limits(x = UKpostcodes$long, y = UKpostcodes$lat)
```

r